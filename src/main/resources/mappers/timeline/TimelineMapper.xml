<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="timelineMapper">

	<select id="listAll" resultType="int">
		SELECT count(*)
		FROM board
	</select>
	
	<select id="listMatch" resultType="TimelineDTO" parameterType="UserVO">
		SELECT *,
		(6371*acos(cos(radians(#{lat}))*cos(radians(lat))*cos(radians(lon)
		-radians(#{lon}))+sin(radians(#{lat}))*sin(radians(lat))))
		AS distance
		FROM board
		WHERE 
			1=0
			<if test= 'cateId1 == "Y"' >
			or cateId = 1
			</if>
			<if test= 'cateId2 == "Y"'>
			or cateId = 2
			</if>
			<if test= 'cateId3 == "Y"'>
			or cateId = 3
			</if>
			<if test= 'cateId4 == "Y"'>
			or cateId = 4
			</if>
			<if test= 'cateId5 == "Y"'>
			or cateId = '5'
			</if>
			<if test= 'cateId6 == "Y"'>
			or cateId = '6'
			</if>
		ORDER BY distance
	</select>




</mapper>

